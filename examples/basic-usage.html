<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Browser Logger - Basic Usage Example</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #4CAF50;
            padding-bottom: 10px;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 12px 24px;
            margin: 8px 4px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        button:hover {
            background-color: #45a049;
        }
        button.error {
            background-color: #f44336;
        }
        button.error:hover {
            background-color: #da190b;
        }
        button.warn {
            background-color: #ff9800;
        }
        button.warn:hover {
            background-color: #e68900;
        }
        button.info {
            background-color: #2196F3;
        }
        button.info:hover {
            background-color: #0b7dda;
        }
        .section {
            margin: 20px 0;
            padding: 15px;
            background-color: #f9f9f9;
            border-left: 4px solid #4CAF50;
        }
        code {
            background-color: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        .note {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 10px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Browser Logger - Usage Examples</h1>
        
        <div class="note">
            <strong>üìù Note:</strong> Open the browser console (F12) to see the logged messages!
        </div>

        <div class="section">
            <h2>1. Basic Logging</h2>
            <p>Click the buttons below to test different log levels:</p>
            <button onclick="testDebug()">Debug Log</button>
            <button onclick="testLog()">General Log</button>
            <button class="info" onclick="testInfo()">Info Log</button>
            <button class="warn" onclick="testWarn()">Warning Log</button>
            <button class="error" onclick="testError()">Error Log</button>
            <button class="error" onclick="testFatal()">Fatal Log</button>
        </div>

        <div class="section">
            <h2>2. Error Handling</h2>
            <p>Test automatic error catching (errors will appear in console - this is expected!):</p>
            <button class="error" onclick="triggerError()">Trigger Uncaught Error (Expected)</button>
            <button class="error" onclick="triggerPromiseRejection()">Trigger Promise Rejection (Expected)</button>
        </div>

        <div class="section">
            <h2>3. Try-Catch Wrapper</h2>
            <p>Test the tryCatch utility:</p>
            <button onclick="testTryCatchSuccess()">Successful Operation</button>
            <button class="error" onclick="testTryCatchError()">Failed Operation</button>
        </div>

        <div class="section">
            <h2>4. Manual Error Catching</h2>
            <p>Test manual error catching:</p>
            <button class="error" onclick="testCatcher()">Catch Custom Error</button>
        </div>
    </div>

    <!-- Include the logger library -->
    <script src="../dist/clientside-Logger.js"></script>
    
    <script>
        // Initialize the logger with configuration
        Logger.init({
            logURL: 'https://your-api.example.com/logs',  // Replace with your logging endpoint
            logThreshold: 'ERROR',  // Only send ERROR and FATAL to remote server
            routeURL: '/error-page',  // Redirect to this page on fatal errors (optional)
            showMessageInDevelopment: true,  // Show console messages in development
            showMessageInProduction: false,  // Hide console messages in production
            silenceStackTrace: false,  // Show stack traces
            additionalInformation: 'Example App v1.0.0'  // Additional context for logs
        });

        console.log('‚úÖ Logger initialized successfully!');

        // Example 1: Basic Logging Functions
        function testDebug() {
            Logger.debug(['This is a debug message', { userId: 123, action: 'click' }]);
        }

        function testLog() {
            Logger.log(['General log message', 'Additional data']);
        }

        function testInfo() {
            Logger.info(['User performed an action', { timestamp: new Date().toISOString() }]);
        }

        function testWarn() {
            Logger.warn(['Warning: This feature is deprecated']);
        }

        function testError() {
            Logger.error({ 
                errorMessage: 'Something went wrong!', 
                stack: 'Error: at testError (example.html:123)' 
            });
        }

        function testFatal() {
            Logger.fatal({ 
                errorMessage: 'Critical system failure!', 
                stack: new Error().stack 
            });
        }

        // Example 2: Automatic Error Handling
        function triggerError() {
            // This will be automatically caught by the logger's error listener
            throw new Error('This is an intentional error for testing');
        }

        function triggerPromiseRejection() {
            // This will be caught by the unhandledrejection listener
            Promise.reject('Unhandled promise rejection for testing');
        }

        // Example 3: tryCatch Utility
        function testTryCatchSuccess() {
            Logger.tryCatch(
                () => {
                    console.log('‚úÖ Operation completed successfully!');
                    const result = 10 + 20;
                    console.log('Result:', result);
                },
                (error) => {
                    console.log('This should not run');
                }
            );
        }

        function testTryCatchError() {
            Logger.tryCatch(
                () => {
                    // This will throw an error
                    const obj = null;
                    console.log(obj.property);  // Will throw TypeError
                },
                (error) => {
                    console.log('‚úÖ Error was caught and handled:', error.message);
                    alert('Error caught: ' + error.message);
                }
            );
        }

        // Example 4: Manual Error Catching
        function testCatcher() {
            try {
                const data = JSON.parse('invalid json{');
            } catch (error) {
                Logger.catcher(error);
                alert('Error was logged: ' + error.message);
            }
        }

        // Example 5: Real-world usage in an application
        function fetchUserData(userId) {
            Logger.info(['Fetching user data', { userId }]);
            
            Logger.tryCatch(
                async () => {
                    const response = await fetch(`https://jsonplaceholder.typicode.com/users/${userId}`);
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    const data = await response.json();
                    Logger.debug(['User data fetched successfully', data]);
                    console.log('User data:', data);
                },
                (error) => {
                    Logger.error({ 
                        errorMessage: `Failed to fetch user data: ${error.message}`,
                        stack: error.stack
                    });
                }
            );
        }

        // Demonstrate real-world usage
        console.log('\nüìö For a real-world example, run: fetchUserData(1)');
    </script>
</body>
</html>
